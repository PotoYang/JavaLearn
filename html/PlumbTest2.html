<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Plumb</title>
    <style>
        .item {
            position: absolute;
            height: 80px;
            width: 80px;
            border: 2px solid dimgray;
        }

        .circle {
            width: 2px;
            height: 2px;
            background-color: gray;
            display: block
        }
    </style>
</head>
<body>
<div class="item" id="element1" style="left: 400px;"></div>
<div class="item" id="element2" style="left: 600px;"></div>
<div class="item" id="element3" style="top: 200px;left: 500px;"></div>
</body>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/jsplumb.js"></script>
<script type="text/javascript">
    var firstInstance = jsPlumb.getInstance();

    var circleCommon = {
        isSource: true,
        isTarget: true,
        connector: ['Flowchart'],
        maxConnections: -1
    };

    firstInstance.importDefaults({
        PaintStyle: {
            strokeWidth: 3,
            stroke: "lightgray"
        },
        Connector: ["Flowchart"],
        Endpoint: ["Rectangle", {radius: 5}],
        EndpointStyle: {fill: "lightgray", outlineStroke: "dimgray", outlineWidth: 2},
        Overlays: [],
        Anchors: ["Bottom", "Top"]
    });

    var myDConnect = firstInstance.connect({
        source: "element1",
        target: "element2",
        overlays: [
            ["Diamond", {location: 0.6, id: "myD"}]
        ],
        anchors: ["Right", "Left"]
    });

    console.log(myDConnect);
    var circleInstance = myDConnect.connector._jsPlumb.instance;

    circleInstance.addEndpoint("circle", {
        anchors: ["Bottom"]
    }, circleCommon);
    // circleOverlay.setContainer("circle");

    firstInstance.addEndpoint("element3", {
        anchors: ["Top"]
    }, circleCommon);

    //
    // firstInstance.connect({
    //     source: "element1",
    //     target: "element3",
    //     scope: "someScope"
    // });
    // firstInstance.connect({
    //     source: "element1",
    //     target: "element4",
    //     overlays: [
    //         ["Custom", {
    //             create: function (component) {
    //                 return $("<select id='myDropDown'><option value='foo'>foo</option><option value='bar'>bar</option></select>");
    //             },
    //             location: 0.7,
    //             id: "customOverlay"
    //         }]
    //     ]
    // });

    firstInstance.draggable("element1");
    firstInstance.draggable("element2");
    firstInstance.draggable("element3");
</script>
</html>